"use strict";
var f = require("../flux");
var s = require("./state");
var c = require("./state.cursors");
exports.addTodo = f.createAction(c.rootCursor, function (state) {
    return f.shallowCopy(state, function (section) {
        section.todos = [
            { id: new Date().getTime(), isDone: false, name: section.editedTodo.name }
        ].concat(section.todos);
        section.editedTodo = s.createDefaultTodo();
    });
});
exports.updateNewTodoName = f.createAction(c.editedTodoCursor, function (todo, name) {
    return f.shallowCopy(todo, function (t) {
        if (name)
            t.name = name;
    });
});
exports.removeTodo = f.createAction(c.todosCursor, function (todos, id) {
    return todos.filter(function (t) { return t.id !== id; }).slice();
});
exports.changeDoneStatus = f.createAction(c.todosCursor, function (todos, params) {
    return todos.map(function (t) {
        if (params && t.id === params.id)
            return f.shallowCopy(t, function (nT) {
                nT.isDone = params.isDone;
                return nT;
            });
        return t;
    });
});
